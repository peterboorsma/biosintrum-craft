{% if entry.contentBlocks|length %}
{% for block in entry.contentBlocks.all() %}
{% switch block.type %}
    {# contentblock #}
    {% case "contentblock" %}
{# als er WEL richText is en WEL een afbeelding #}
    {% if block.richText is defined and block.richText and block.image[0] is defined and block.image[0] %}
    <div class="article__contentBlockText{% if block.image[0] is defined and block.image[0] and block.imagePosition is defined and block.imagePosition %} article__contentBlockText--left{% elseif block.image[0] is defined and block.image[0] and block.imagePosition is defined and not block.imagePosition %} article__contentBlockText--right{% else %} article__contentBlockText--centered{% endif %}">
        <div class="content cKcontent">
            {{ block.richText }}
        </div>
    </div>

    <figure class="article__contentBlockImage{% if block.imagePosition is defined and block.imagePosition %} article__contentBlockImage--right{% else %} article__contentBlockImage--left{% endif %}">
        {% import '_macros/_image.twig' as img %}
        {{ img.responsiveImage(block.image, { maxWidth: 800 }) }}

        {% if block.image[0].title %}
            <figcaption class="caption">{{ block.image[0].title }}</figcaption>
        {% endif %}
    </figure>
{# als er GEEN richText is en WEL een afbeelding #}
    {% elseif block.richText is defined and not block.richText and block.image[0] is defined and block.image[0] %}
        <figure class="article__contentBlockImage article__contentBlockImage--centered">
        {% import '_macros/_image.twig' as img %}
        {{ img.responsiveImage(block.image, { maxWidth: 800 }) }}

        {% if block.image[0].title %}
            <figcaption class="caption">{{ block.image[0].title }}</figcaption>
        {% endif %}
    </figure>
{# als er WEL richText is en GEEN een afbeelding #}
    {% elseif block.richText is defined and block.richText and block.image[0] is not defined %}
    <div class="article__contentBlockText article__contentBlockText--centered">
        <div class="content cKcontent">
            {{ block.richText }}
        </div>
    </div>
    {% endif %}

    {# contentblockImage #}
    {% case "contentblockImage" %}
        {% if block.image[0] is defined and block.image[0] %}
        <figure class="article__contentBlockFullImage{% if block.image[0].title %} article__contentBlockFullImage--withCaption{% else %} article__contentBlockFullImage--withoutCaption{% endif %}">
            {% import '_macros/_image.twig' as img %}
            {{ img.responsiveImage(block.image, { maxWidth: 940 }) }}

            {% if block.image[0].title %}
                <figcaption class="caption">{{ block.image[0].title }}</figcaption>
            {% endif %}
        </figure>
        {% endif %}

    {# contentblockEmbed #}
    {% case "contentblockEmbed" %}
    <figure class="article__contentblockEmbed embed">
        {% set embed = craft.embeddedAssets.get(block.embed.one()) %}
        {% if embed %}
            {{ embed.code }}

            {% if embed.title %}<figcaption class="caption">{{ embed.title }}</figcaption>{% endif %}
        {% else %}
            <p class="error">{{ 'Geen embed gevonden.'|t }}</p>
        {% endif %}
    </figure>

    {# contentblockButtons #}
    {% case "contentblockButtons" %}
    <div class="article__contentBlockButtons">
        <div class="buttonGroup">
        {% for block in block.buttonGroup %}
            {% if block.buttonLink is defined and block.buttonLink  %}
                <a class="button button--large button--{{ (block.buttonLink.type is defined and block.buttonLink.type is not empty) ? block.buttonLink.type : 'forward' }}" href="{{ block.buttonLink.url }}" >
                    {% if block.buttonLink.label is defined and block.buttonLink.label is not empty %}
                        {{ block.buttonLink.label }}
                    {% endif %}
                </a>
            {% endif %}

            {% if block.buttonDownload is defined and block.buttonDownload %}
                {% set download = block.buttonDownload.download.one() %}
                {% if download is defined and download %}
                    <a class="button button--large button--black button--download" href="{{ download.getUrl() }}">
                        {{ block.buttonDownload.plainText }}
                    </a>
                {% endif %}
            {% endif %}
        {% endfor %}
        </div>
    </div>

{% endswitch %}
{% endfor %}
{% endif %}